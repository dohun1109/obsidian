---
banner: https://gongu.copyright.or.kr/gongu/wrt/cmmn/wrtFileImageView.do?wrtSn=11288959&filePath=L2Rpc2sxL25ld2RhdGEvMjAxNS8wMi9DTFM2OS9OVVJJXzAwMV8wNDQ1X251cmltZWRpYV8yMDE1MTIwMw==&thumbAt=Y&thumbSe=b_tbumb&wrtTy=10006
---
`@Autowired`는 타입(type)으로 조회한다. 
타입으로 조회하기 때문에 , 마치 다음코드와 유사하게 동작한다. (실제로는 더 많은 기능을 제공한다. )
```java
	ac.getBean(DiscountPolicy.class);
```

스프링 빈 조회에서 학습했듯이 타입으로 조회하면 선택된 빈이 2개 이상일 때 문제가 발생한다.
`DiscountPolicy`의 하위타입인 `FixDiscountPolicy`, `RateDiscountPolicy` 둘다 스프링 빈으로 선언해 보자 . 

```java
	@Component
	public class FixDiscountPolicy implements DiscountPolicy{}
```

```java
	@Component
	public class RateDiscountPolicy implements DiscountPolicy{}
```

그리고 이렇게 의존관계 주입을 하면 
```java 
	@Autowired
	private DiscountPolicy discountPolicy
```


**`NoUniqueBeanDefinitionException`** 오류가 발생한다.
오류 메시지 내용을 보면 하나의 빈을 기대 했는데 `fixDiscountPolicy`, `rateDiscountPolicy`   2개가 발견 되었다고 알려준다. 


이때 하위 타입으로 지정할 수도 있지만, 하위 타입으로 지정하는 것은 DIP를 위배하고 유연성이 떨어진다. 그리고 이름만 다르고 , 완전히 똑같은 타입의 스프링 빈이2개 있을때 해결이 안된다. 
스프링 빈을 수동 등록을 해서 문제를 해결해도 되지만, 의존관계 자동 주입에서 해결하는 여러 방법이 있다. 


